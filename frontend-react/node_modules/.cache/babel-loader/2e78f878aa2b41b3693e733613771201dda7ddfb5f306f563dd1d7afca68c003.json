{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\amaya\\\\Downloads\\\\rag-asistente-main\\\\rag-asistente-main\\\\frontend-react\\\\src\\\\Chat.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from \"react\";\nimport { query } from \"./api\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Chat() {\n  _s();\n  const [q, setQ] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [answer, setAnswer] = useState(\"\");\n  const [sources, setSources] = useState([]);\n  const endRef = useRef(null);\n  useEffect(() => {\n    var _endRef$current;\n    (_endRef$current = endRef.current) === null || _endRef$current === void 0 ? void 0 : _endRef$current.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  }, [answer, sources, loading]);\n  async function onSend() {\n    if (!q.trim()) return;\n    setLoading(true);\n    try {\n      const res = await query(q, 3);\n      setAnswer(res.answer);\n      setSources(res.sources || []);\n    } finally {\n      setLoading(false);\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      maxWidth: 800,\n      margin: \"0 auto\",\n      padding: 16\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Asistente\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: 12\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        style: {\n          width: \"80%\"\n        },\n        placeholder: \"Escribe tu pregunta\\u2026\",\n        value: q,\n        onChange: e => setQ(e.target.value),\n        onKeyDown: e => e.key === \"Enter\" && onSend()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 31,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onSend,\n        disabled: loading,\n        style: {\n          marginLeft: 8\n        },\n        children: loading ? \"Consultando…\" : \"Enviar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        minHeight: 120,\n        whiteSpace: \"pre-wrap\"\n      },\n      children: answer && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Respuesta\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: answer\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Fuentes\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"ol\", {\n          children: sources.slice(0, 10).map((s, i) => /*#__PURE__*/_jsxDEV(\"li\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: [\"[s\", i + 1, \"] \", s.title]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 52,\n              columnNumber: 19\n            }, this), \" \\u2014 p\\xE1g. \", s.page, /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                color: \"#555\"\n              },\n              children: s.snippet\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 53,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n              href: s.uri,\n              target: \"_blank\",\n              rel: \"noreferrer\",\n              children: \"Ver fuente\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 54,\n              columnNumber: 19\n            }, this)]\n          }, i, true, {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: endRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 28,\n    columnNumber: 5\n  }, this);\n}\n_s(Chat, \"4TRUZpZNJlyQKJEZU5lKtPf8csk=\");\n_c = Chat;\nvar _c;\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"names":["React","useState","useRef","useEffect","query","jsxDEV","_jsxDEV","Fragment","_Fragment","Chat","_s","q","setQ","loading","setLoading","answer","setAnswer","sources","setSources","endRef","_endRef$current","current","scrollIntoView","behavior","onSend","trim","res","style","maxWidth","margin","padding","children","fileName","_jsxFileName","lineNumber","columnNumber","marginBottom","width","placeholder","value","onChange","e","target","onKeyDown","key","onClick","disabled","marginLeft","minHeight","whiteSpace","slice","map","s","i","title","page","color","snippet","href","uri","rel","ref","_c","$RefreshReg$"],"sources":["C:/Users/amaya/Downloads/rag-asistente-main/rag-asistente-main/frontend-react/src/Chat.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\r\nimport { query } from \"./api\";\r\n\r\nexport default function Chat() {\r\n  const [q, setQ] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [answer, setAnswer] = useState(\"\");\r\n  const [sources, setSources] = useState([]);\r\n  const endRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    endRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  }, [answer, sources, loading]);\r\n\r\n  async function onSend() {\r\n    if (!q.trim()) return;\r\n    setLoading(true);\r\n    try {\r\n      const res = await query(q, 3);\r\n      setAnswer(res.answer);\r\n      setSources(res.sources || []);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div style={{ maxWidth: 800, margin: \"0 auto\", padding: 16 }}>\r\n      <h1>Asistente</h1>\r\n      <div style={{ marginBottom: 12 }}>\r\n        <input\r\n          style={{ width: \"80%\" }}\r\n          placeholder=\"Escribe tu pregunta…\"\r\n          value={q}\r\n          onChange={(e) => setQ(e.target.value)}\r\n          onKeyDown={(e) => e.key === \"Enter\" && onSend()}\r\n        />\r\n        <button onClick={onSend} disabled={loading} style={{ marginLeft: 8 }}>\r\n          {loading ? \"Consultando…\" : \"Enviar\"}\r\n        </button>\r\n      </div>\r\n\r\n      <div style={{ minHeight: 120, whiteSpace: \"pre-wrap\" }}>\r\n        {answer && (\r\n          <>\r\n            <h3>Respuesta</h3>\r\n            <p>{answer}</p>\r\n            <h3>Fuentes</h3>\r\n            <ol>\r\n              {sources.slice(0, 10).map((s, i) => (\r\n                <li key={i}>\r\n                  <strong>[s{i + 1}] {s.title}</strong> — pág. {s.page}\r\n                  <div style={{ color: \"#555\" }}>{s.snippet}</div>\r\n                  <a href={s.uri} target=\"_blank\" rel=\"noreferrer\">\r\n                    Ver fuente\r\n                  </a>\r\n                </li>\r\n              ))}\r\n            </ol>\r\n          </>\r\n        )}\r\n      </div>\r\n      <div ref={endRef} />\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}