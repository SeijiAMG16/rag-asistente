{"ast":null,"code":"import React,{useState}from\"react\";import{register}from\"./api\";/**\r\n * Componente de registro de usuarios\r\n * Permite crear nuevas cuentas conectando con el endpoint /auth/register del backend\r\n */import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Register(_ref){let{onRegister,onBackToLogin}=_ref;// Estados del formulario de registro\nconst[username,setUsername]=useState(\"\");const[email,setEmail]=useState(\"\");const[password,setPassword]=useState(\"\");const[confirmPassword,setConfirmPassword]=useState(\"\");const[error,setError]=useState(\"\");const[success,setSuccess]=useState(\"\");const[loading,setLoading]=useState(false);/**\r\n   * Maneja el envío del formulario de registro\r\n   * Valida los datos y envía la petición al backend\r\n   */async function handleRegister(e){e.preventDefault();setLoading(true);setError(\"\");setSuccess(\"\");// Validaciones del lado del cliente\nif(!username.trim()||!email.trim()||!password||!confirmPassword){setError(\"Todos los campos son requeridos\");setLoading(false);return;}if(password!==confirmPassword){setError(\"Las contraseñas no coinciden\");setLoading(false);return;}if(password.length<6){setError(\"La contraseña debe tener al menos 6 caracteres\");setLoading(false);return;}// Validación básica de email\nconst emailRegex=/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;if(!emailRegex.test(email)){setError(\"Por favor ingresa un email válido\");setLoading(false);return;}try{// Enviar petición de registro al backend\nawait register(username,email,password);setSuccess(\"Usuario creado exitosamente. Ahora puedes iniciar sesión.\");// Limpiar formulario después del registro exitoso\nsetUsername(\"\");setEmail(\"\");setPassword(\"\");setConfirmPassword(\"\");// Opcional: redirigir automáticamente al login después de 2 segundos\nsetTimeout(()=>{onBackToLogin();},2000);}catch(err){var _err$response,_err$response$data;// Manejar errores del servidor\nconst errorMessage=((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.error)||\"Error al crear la cuenta\";setError(errorMessage);}finally{setLoading(false);}}return/*#__PURE__*/_jsx(\"div\",{className:\"app-container\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleRegister,className:\"auth-form\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Crear Cuenta\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Nombre de usuario\",value:username,onChange:e=>setUsername(e.target.value),className:\"input-field\",disabled:loading}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Correo electr\\xF3nico\",value:email,onChange:e=>setEmail(e.target.value),className:\"input-field\",disabled:loading}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Contrase\\xF1a (m\\xEDnimo 6 caracteres)\",value:password,onChange:e=>setPassword(e.target.value),className:\"input-field\",disabled:loading}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Confirmar contrase\\xF1a\",value:confirmPassword,onChange:e=>setConfirmPassword(e.target.value),className:\"input-field\",disabled:loading}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,className:\"btn-primary\",children:loading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"loading-spinner\"}),\" Creando cuenta...\"]}):\"Crear Cuenta\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onBackToLogin,className:\"btn-secondary\",disabled:loading,children:\"\\xBFYa tienes cuenta? Inicia sesi\\xF3n\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),success&&/*#__PURE__*/_jsx(\"div\",{className:\"success-message\",children:success})]})});}","map":{"version":3,"names":["React","useState","register","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Register","_ref","onRegister","onBackToLogin","username","setUsername","email","setEmail","password","setPassword","confirmPassword","setConfirmPassword","error","setError","success","setSuccess","loading","setLoading","handleRegister","e","preventDefault","trim","length","emailRegex","test","setTimeout","err","_err$response","_err$response$data","errorMessage","response","data","className","children","onSubmit","type","placeholder","value","onChange","target","disabled","onClick"],"sources":["C:/Users/amaya/Downloads/rag-asistente-main/rag-asistente-main/frontend-react/src/Register.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { register } from \"./api\";\r\n\r\n/**\r\n * Componente de registro de usuarios\r\n * Permite crear nuevas cuentas conectando con el endpoint /auth/register del backend\r\n */\r\nexport default function Register({ onRegister, onBackToLogin }) {\r\n  // Estados del formulario de registro\r\n  const [username, setUsername] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n  const [success, setSuccess] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  /**\r\n   * Maneja el envío del formulario de registro\r\n   * Valida los datos y envía la petición al backend\r\n   */\r\n  async function handleRegister(e) {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setError(\"\");\r\n    setSuccess(\"\");\r\n\r\n    // Validaciones del lado del cliente\r\n    if (!username.trim() || !email.trim() || !password || !confirmPassword) {\r\n      setError(\"Todos los campos son requeridos\");\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    if (password !== confirmPassword) {\r\n      setError(\"Las contraseñas no coinciden\");\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    if (password.length < 6) {\r\n      setError(\"La contraseña debe tener al menos 6 caracteres\");\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    // Validación básica de email\r\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n    if (!emailRegex.test(email)) {\r\n      setError(\"Por favor ingresa un email válido\");\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // Enviar petición de registro al backend\r\n      await register(username, email, password);\r\n      setSuccess(\"Usuario creado exitosamente. Ahora puedes iniciar sesión.\");\r\n      \r\n      // Limpiar formulario después del registro exitoso\r\n      setUsername(\"\");\r\n      setEmail(\"\");\r\n      setPassword(\"\");\r\n      setConfirmPassword(\"\");\r\n      \r\n      // Opcional: redirigir automáticamente al login después de 2 segundos\r\n      setTimeout(() => {\r\n        onBackToLogin();\r\n      }, 2000);\r\n      \r\n    } catch (err) {\r\n      // Manejar errores del servidor\r\n      const errorMessage = err.response?.data?.error || \"Error al crear la cuenta\";\r\n      setError(errorMessage);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"app-container\">\r\n      <form onSubmit={handleRegister} className=\"auth-form\">\r\n        <h2>Crear Cuenta</h2>\r\n        \r\n        {/* Campo de nombre de usuario */}\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Nombre de usuario\"\r\n          value={username}\r\n          onChange={(e) => setUsername(e.target.value)}\r\n          className=\"input-field\"\r\n          disabled={loading}\r\n        />\r\n        \r\n        {/* Campo de email */}\r\n        <input\r\n          type=\"email\"\r\n          placeholder=\"Correo electrónico\"\r\n          value={email}\r\n          onChange={(e) => setEmail(e.target.value)}\r\n          className=\"input-field\"\r\n          disabled={loading}\r\n        />\r\n        \r\n        {/* Campo de contraseña */}\r\n        <input\r\n          type=\"password\"\r\n          placeholder=\"Contraseña (mínimo 6 caracteres)\"\r\n          value={password}\r\n          onChange={(e) => setPassword(e.target.value)}\r\n          className=\"input-field\"\r\n          disabled={loading}\r\n        />\r\n        \r\n        {/* Campo de confirmación de contraseña */}\r\n        <input\r\n          type=\"password\"\r\n          placeholder=\"Confirmar contraseña\"\r\n          value={confirmPassword}\r\n          onChange={(e) => setConfirmPassword(e.target.value)}\r\n          className=\"input-field\"\r\n          disabled={loading}\r\n        />\r\n        \r\n        {/* Botón de registro */}\r\n        <button type=\"submit\" disabled={loading} className=\"btn-primary\">\r\n          {loading ? (\r\n            <>\r\n              <span className=\"loading-spinner\"></span> Creando cuenta...\r\n            </>\r\n          ) : (\r\n            \"Crear Cuenta\"\r\n          )}\r\n        </button>\r\n        \r\n        {/* Botón para volver al login */}\r\n        <button \r\n          type=\"button\" \r\n          onClick={onBackToLogin} \r\n          className=\"btn-secondary\"\r\n          disabled={loading}\r\n        >\r\n          ¿Ya tienes cuenta? Inicia sesión\r\n        </button>\r\n        \r\n        {/* Mostrar mensajes de error */}\r\n        {error && <div className=\"error-message\">{error}</div>}\r\n        \r\n        {/* Mostrar mensajes de éxito */}\r\n        {success && <div className=\"success-message\">{success}</div>}\r\n      </form>\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}