{"ast":null,"code":"import React,{useState}from\"react\";import{login}from\"./api\";/**\r\n * Componente de inicio de sesión\r\n * Permite a los usuarios autenticarse con username y password\r\n */import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Login(_ref){let{onLogin,onShowRegister}=_ref;// Estados del formulario de login\nconst[username,setUsername]=useState(\"\");const[password,setPassword]=useState(\"\");const[error,setError]=useState(\"\");const[loading,setLoading]=useState(false);/**\r\n   * Maneja el envío del formulario de login\r\n   * Valida credenciales y autentica al usuario\r\n   */async function handleLogin(e){e.preventDefault();setLoading(true);setError(\"\");// Validación básica del lado del cliente\nif(!username.trim()||!password){setError(\"Por favor ingresa usuario y contraseña\");setLoading(false);return;}try{// Enviar petición de login al backend\nconst data=await login(username,password);try{localStorage.setItem('token',data.access);localStorage.setItem('refresh',data.refresh||'');}catch(_unused){}// Si el login es exitoso, notificar al componente padre\nonLogin();}catch(err){var _err$response;// Manejar errores de autenticación\nif(((_err$response=err.response)===null||_err$response===void 0?void 0:_err$response.status)===401){setError(\"Usuario o contraseña incorrectos\");}else{setError(\"Error de conexión. Intenta nuevamente.\");}}finally{setLoading(false);}}return/*#__PURE__*/_jsx(\"div\",{className:\"app-container\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleLogin,className:\"auth-form\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Iniciar Sesi\\xF3n\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Nombre de usuario\",value:username,onChange:e=>setUsername(e.target.value),className:\"input-field\",disabled:loading}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Contrase\\xF1a\",value:password,onChange:e=>setPassword(e.target.value),className:\"input-field\",disabled:loading}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,className:\"btn-primary\",children:loading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"loading-spinner\"}),\" Entrando...\"]}):\"Iniciar Sesión\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onShowRegister,className:\"btn-secondary\",disabled:loading,children:\"\\xBFNo tienes cuenta? Reg\\xEDstrate\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error})]})});}","map":{"version":3,"names":["React","useState","login","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Login","_ref","onLogin","onShowRegister","username","setUsername","password","setPassword","error","setError","loading","setLoading","handleLogin","e","preventDefault","trim","data","localStorage","setItem","access","refresh","_unused","err","_err$response","response","status","className","children","onSubmit","type","placeholder","value","onChange","target","disabled","onClick"],"sources":["C:/Users/amaya/Downloads/rag-asistente-main/rag-asistente-main/frontend-react/src/Login.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { login } from \"./api\";\r\n\r\n/**\r\n * Componente de inicio de sesión\r\n * Permite a los usuarios autenticarse con username y password\r\n */\r\nexport default function Login({ onLogin, onShowRegister }) {\r\n  // Estados del formulario de login\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  /**\r\n   * Maneja el envío del formulario de login\r\n   * Valida credenciales y autentica al usuario\r\n   */\r\n  async function handleLogin(e) {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setError(\"\");\r\n\r\n    // Validación básica del lado del cliente\r\n    if (!username.trim() || !password) {\r\n      setError(\"Por favor ingresa usuario y contraseña\");\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // Enviar petición de login al backend\r\n      const data = await login(username, password);\r\n      try {\r\n        localStorage.setItem('token', data.access);\r\n        localStorage.setItem('refresh', data.refresh || '');\r\n      } catch {}\r\n      // Si el login es exitoso, notificar al componente padre\r\n      onLogin();\r\n    } catch (err) {\r\n      // Manejar errores de autenticación\r\n      if (err.response?.status === 401) {\r\n        setError(\"Usuario o contraseña incorrectos\");\r\n      } else {\r\n        setError(\"Error de conexión. Intenta nuevamente.\");\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"app-container\">\r\n      <form onSubmit={handleLogin} className=\"auth-form\">\r\n        <h2>Iniciar Sesión</h2>\r\n        \r\n        {/* Campo de nombre de usuario */}\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Nombre de usuario\"\r\n          value={username}\r\n          onChange={(e) => setUsername(e.target.value)}\r\n          className=\"input-field\"\r\n          disabled={loading}\r\n        />\r\n        \r\n        {/* Campo de contraseña */}\r\n        <input\r\n          type=\"password\"\r\n          placeholder=\"Contraseña\"\r\n          value={password}\r\n          onChange={(e) => setPassword(e.target.value)}\r\n          className=\"input-field\"\r\n          disabled={loading}\r\n        />\r\n        \r\n        {/* Botón de inicio de sesión */}\r\n        <button type=\"submit\" disabled={loading} className=\"btn-primary\">\r\n          {loading ? (\r\n            <>\r\n              <span className=\"loading-spinner\"></span> Entrando...\r\n            </>\r\n          ) : (\r\n            \"Iniciar Sesión\"\r\n          )}\r\n        </button>\r\n        \r\n        {/* Botón para ir al registro */}\r\n        <button \r\n          type=\"button\" \r\n          onClick={onShowRegister} \r\n          className=\"btn-secondary\"\r\n          disabled={loading}\r\n        >\r\n          ¿No tienes cuenta? Regístrate\r\n        </button>\r\n        \r\n        {/* Mostrar mensajes de error */}\r\n        {error && <div className=\"error-message\">{error}</div>}\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,KAAK,KAAQ,OAAO,CAE7B;AACA;AACA;AACA,GAHA,OAAAC,GAAA,IAAAC,IAAA,CAAAC,QAAA,IAAAC,SAAA,CAAAC,IAAA,IAAAC,KAAA,yBAIA,cAAe,SAAS,CAAAC,KAAKA,CAAAC,IAAA,CAA8B,IAA7B,CAAEC,OAAO,CAAEC,cAAe,CAAC,CAAAF,IAAA,CACvD;AACA,KAAM,CAACG,QAAQ,CAAEC,WAAW,CAAC,CAAGb,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACc,QAAQ,CAAEC,WAAW,CAAC,CAAGf,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACgB,KAAK,CAAEC,QAAQ,CAAC,CAAGjB,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACkB,OAAO,CAAEC,UAAU,CAAC,CAAGnB,QAAQ,CAAC,KAAK,CAAC,CAE7C;AACF;AACA;AACA,KACE,cAAe,CAAAoB,WAAWA,CAACC,CAAC,CAAE,CAC5BA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClBH,UAAU,CAAC,IAAI,CAAC,CAChBF,QAAQ,CAAC,EAAE,CAAC,CAEZ;AACA,GAAI,CAACL,QAAQ,CAACW,IAAI,CAAC,CAAC,EAAI,CAACT,QAAQ,CAAE,CACjCG,QAAQ,CAAC,wCAAwC,CAAC,CAClDE,UAAU,CAAC,KAAK,CAAC,CACjB,OACF,CAEA,GAAI,CACF;AACA,KAAM,CAAAK,IAAI,CAAG,KAAM,CAAAvB,KAAK,CAACW,QAAQ,CAAEE,QAAQ,CAAC,CAC5C,GAAI,CACFW,YAAY,CAACC,OAAO,CAAC,OAAO,CAAEF,IAAI,CAACG,MAAM,CAAC,CAC1CF,YAAY,CAACC,OAAO,CAAC,SAAS,CAAEF,IAAI,CAACI,OAAO,EAAI,EAAE,CAAC,CACrD,CAAE,MAAAC,OAAA,CAAM,CAAC,CACT;AACAnB,OAAO,CAAC,CAAC,CACX,CAAE,MAAOoB,GAAG,CAAE,KAAAC,aAAA,CACZ;AACA,GAAI,EAAAA,aAAA,CAAAD,GAAG,CAACE,QAAQ,UAAAD,aAAA,iBAAZA,aAAA,CAAcE,MAAM,IAAK,GAAG,CAAE,CAChChB,QAAQ,CAAC,kCAAkC,CAAC,CAC9C,CAAC,IAAM,CACLA,QAAQ,CAAC,wCAAwC,CAAC,CACpD,CACF,CAAC,OAAS,CACRE,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAEA,mBACEhB,IAAA,QAAK+B,SAAS,CAAC,eAAe,CAAAC,QAAA,cAC5B5B,KAAA,SAAM6B,QAAQ,CAAEhB,WAAY,CAACc,SAAS,CAAC,WAAW,CAAAC,QAAA,eAChDhC,IAAA,OAAAgC,QAAA,CAAI,mBAAc,CAAI,CAAC,cAGvBhC,IAAA,UACEkC,IAAI,CAAC,MAAM,CACXC,WAAW,CAAC,mBAAmB,CAC/BC,KAAK,CAAE3B,QAAS,CAChB4B,QAAQ,CAAGnB,CAAC,EAAKR,WAAW,CAACQ,CAAC,CAACoB,MAAM,CAACF,KAAK,CAAE,CAC7CL,SAAS,CAAC,aAAa,CACvBQ,QAAQ,CAAExB,OAAQ,CACnB,CAAC,cAGFf,IAAA,UACEkC,IAAI,CAAC,UAAU,CACfC,WAAW,CAAC,eAAY,CACxBC,KAAK,CAAEzB,QAAS,CAChB0B,QAAQ,CAAGnB,CAAC,EAAKN,WAAW,CAACM,CAAC,CAACoB,MAAM,CAACF,KAAK,CAAE,CAC7CL,SAAS,CAAC,aAAa,CACvBQ,QAAQ,CAAExB,OAAQ,CACnB,CAAC,cAGFf,IAAA,WAAQkC,IAAI,CAAC,QAAQ,CAACK,QAAQ,CAAExB,OAAQ,CAACgB,SAAS,CAAC,aAAa,CAAAC,QAAA,CAC7DjB,OAAO,cACNX,KAAA,CAAAF,SAAA,EAAA8B,QAAA,eACEhC,IAAA,SAAM+B,SAAS,CAAC,iBAAiB,CAAO,CAAC,eAC3C,EAAE,CAAC,CAEH,gBACD,CACK,CAAC,cAGT/B,IAAA,WACEkC,IAAI,CAAC,QAAQ,CACbM,OAAO,CAAEhC,cAAe,CACxBuB,SAAS,CAAC,eAAe,CACzBQ,QAAQ,CAAExB,OAAQ,CAAAiB,QAAA,CACnB,qCAED,CAAQ,CAAC,CAGRnB,KAAK,eAAIb,IAAA,QAAK+B,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAEnB,KAAK,CAAM,CAAC,EAClD,CAAC,CACJ,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}